# 團隊角色認證系統需求

## 核心功能

#### 功能 1：系統初始化
- **做什麼**：第一次使用時建立 Owner 帳號
- **為什麼**：系統需要管理員才能運作
- **如何驗收**：當系統無用戶時，顯示註冊頁面；註冊後自動成為 Owner

#### 功能 2：智能登入系統
- **做什麼**：系統根據後台設定自動決定用戶的登入方式（密碼或 OTP）
- **為什麼**：提供統一的登入體驗，同時允許管理員控制安全策略
- **如何驗收**：用戶輸入 Email 後，系統自動檢查該用戶的登入方式設定，並引導到對應的驗證流程

#### 功能 2.1：密碼登入流程
- **做什麼**：當用戶被設定為密碼登入時，使用 Email 和密碼進行兩步驟登入
- **為什麼**：提供傳統且熟悉的登入方式
- **如何驗收**：第一步輸入 Email，系統檢查後顯示密碼輸入框，驗證成功後進入系統

#### 功能 2.2：OTP 登入流程
- **做什麼**：當用戶被設定為 OTP 登入時，系統自動發送一次性驗證碼
- **為什麼**：提供更安全的無密碼登入方式，避免密碼洩露風險
- **如何驗收**：第一步輸入 Email，系統檢查後自動發送 OTP，用戶輸入正確驗證碼後進入系統

#### 功能 3：成員管理
- **做什麼**：Owner 可以新增團隊成員並設定密碼
- **為什麼**：讓團隊其他人也能使用系統
- **如何驗收**：Owner 新增成員後，該成員可以用設定的密碼登入

#### 功能 3.1：邀請功能
- **做什麼**：Owner 可以透過 Email 邀請新成員加入團隊，被邀請者收到邀請連結後可自行完成註冊
- **為什麼**：提供更便利的成員加入流程，減少管理員手動設定密碼的工作量
- **如何驗收**：Owner 輸入 Email 發送邀請，被邀請者點擊邀請連結後可設定自己的密碼並加入團隊

#### 功能 3.2：邀請鏈接複製
- **做什麼**：Owner 可以產生邀請鏈接和臨時密碼並複製出來，直接貼給對方使用
- **為什麼**：提供更靈活的邀請方式，不依賴 Email 系統，可透過任何通訊管道分享邀請
- **如何驗收**：Owner 點擊產生邀請鏈接按鈕，系統產生唯一鏈接和6位數字臨時密碼並提供複製功能，被邀請者透過鏈接和臨時密碼可直接登入並設定新密碼

#### 功能 3.3：臨時密碼功能
- **做什麼**：系統為邀請鏈接生成6位數字臨時密碼，供被邀請者首次登入使用
- **為什麼**：提高邀請流程的安全性，確保只有收到臨時密碼的用戶才能使用邀請鏈接
- **如何驗收**：邀請鏈接生成時同時產生6位數字臨時密碼，被邀請者首次登入必須使用此密碼，登入後必須立即修改密碼

#### 功能 4：角色權限與用戶管理
- **做什麼**：不同角色看到不同功能，管理員可以管理用戶設定
- **為什麼**：保護敏感功能，分工明確，並允許靈活的安全策略管理
- **如何驗收**：登入後根據角色顯示對應功能選單，管理員可以設定用戶登入方式

#### 功能 4.1：登入方式管理
- **做什麼**：管理員可以為每個用戶設定登入方式（密碼登入或 OTP 登入）
- **為什麼**：允許靈活的安全策略管理，不同用戶可採用不同的安全等級
- **如何驗收**：管理員在用戶管理頁面可以切換用戶的登入方式，設定立即生效